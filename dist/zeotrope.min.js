/*!
 * zeotrope.js 1.0.0 <>
 * Contributor(s): Kai Lam <kai.chun.lam@gmail.com>
 * Last Build: 2015-04-27
*/


!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){this.el=a,this.ctx=this.el.getContext("2d"),this._resizeHandler=this._onResize.bind(this),window.addEventListener(this._resizeHandler),this._onResize()}var e=a("./helpers"),f=a("./../render/Scale.js"),g=a("./../render/Position.js");b.exports=d,d.prototype={scales:[],positions:[],_onResize:function(){var a=this.el.offsetWidth,b=this.el.offsetHeight;if(a!==this.width&&b!==this.height){this.width=a,this.height=b,this.el.setAttribute("width",this.width),this.el.setAttribute("height",this.height);for(var c=0;c<this.scales.length;c++)this.scales[c].update();for(var d=0;d<this.positions.length;d++)this.positions[d].update()}},getPt:function(a,b){return g.getPt(a,this,b)},getPosition:function(a,b){var c=new g(a,this,b);return this.positions.push(c),c},getSize:function(a,b){return f.getSize(a,b,this)},getScale:function(a,b){var c=new f(a,b,this);return this.scales.push(c),c},detach:function(a){var b;a instanceof f&&(b=this.scales),a instanceof g&&(b=this.positions),e.remove(b,a)},clear:function(){this.ctx.clearRect(0,0,this.width,this.height)},remove:function(){window.removeEventListener(this._resizeHandler),this.el.parentElement.removeChild(this.el)}}},{"./../render/Position.js":8,"./../render/Scale.js":9,"./helpers":5}],2:[function(a,b,c){"use strict";function d(a){var b=this.opt=e.extend({},g,a);this.easing=f[b.easing],this.start=b.start instanceof Date?b.start:new Date,this.end=b.end instanceof Date?b.end:new Date(this.start.getTime()+b.duration),this.duration=this.end-this.start}var e=a("./helpers.js"),f=a("./easings.js");b.exports=d;var g={easing:"linear",start:null,end:null,duration:1e3,iterate:1};d.prototype={getProgress:function(a){var b=a||new Date;return b<this.start?0:b>this.end?1:this.easing((b-this.start)/this.duration)},reverse:function(){},pause:function(){},play:function(){},goTo:function(){}}},{"./easings.js":3,"./helpers.js":5}],3:[function(a,b,c){"use strict";b.exports={linear:function(a){return a},easeInQuad:function(a){return a*a},easeOutQuad:function(a){return a*(2-a)},easeInOutQuad:function(a){return.5>a?2*a*a:-1+(4-2*a)*a},easeInCubic:function(a){return a*a*a},easeOutCubic:function(a){return--a*a*a+1},easeInOutCubic:function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},easeInQuart:function(a){return a*a*a*a},easeOutQuart:function(a){return 1- --a*a*a*a},easeInOutQuart:function(a){return.5>a?8*a*a*a*a:1-8*--a*a*a*a},easeInQuint:function(a){return a*a*a*a*a},easeOutQuint:function(a){return 1+--a*a*a*a*a},easeInOutQuint:function(a){return.5>a?16*a*a*a*a*a:1+16*--a*a*a*a*a}}},{}],4:[function(a,b,c){"use strict";var d=a("./helpers");b.exports={listeners:[],status:0,_frame:function(){this.status&&(this.execute(),window.requestAnimationFrame(this._frame.bind(this)))},start:function(){this.status=1,window.requestAnimationFrame?this._frame():this._intvl=window.setInterval(this._frame.bind(this),16)},stop:function(){this.status=0,this._intvl&&window.clearInterval(this._intvl)},execute:function(){for(var a=0;a<this.listeners.length;a++)this.listeners[a]()},add:function(a){return this.listeners.length||this.start(),this.listeners.push(a),a},remove:function(a){d.remove(this.listeners,a),this.listeners.length||this.stop()}}},{"./helpers":5}],5:[function(a,b,c){"use strict";b.exports={extend:function(){for(var a=1;a<arguments.length;a++)for(var b in arguments[a])arguments[a].hasOwnProperty(b)&&(arguments[0][b]=arguments[a][b]);return arguments[0]},extract:function(a,b){for(var c={},d=0;d<b.length;d++)c[b[d]]=a[b[d]]},remove:function(a,b){return a.splice(a.indexOf(b),1)}}},{}],6:[function(a,b,c){"use strict";function d(a){this.opt=f.extend({},g,a),this.time=new e(a.time),this.draw=this.opt.draw}var e=a("./../core/Timeline.js"),f=a("./../core/helpers.js");b.exports=d;var g={fillMode:"none",time:{},draw:function(){}};d.prototype={render:function(a){var b=this.time.getProgress();this.isFill(b)&&this.draw(a,b)},isFill:function(a){var b=this.opt.fillMode;return"none"!==b||0!==a&&1!==a?"forward"===b&&0===a?!1:"backward"===b&&1===a?!1:!0:!1},detach:function(){this._zeotrope&&this._zeotrope.detach(this)}}},{"./../core/Timeline.js":2,"./../core/helpers.js":5}],7:[function(a,b,c){"use strict";function d(a,b){this.canvas=a,this.opt=e.extend({},f,b),this.el=new Image,this.el.onload=this.onLoad.bind(this),this.el.src=this.opt.src,this.scale=a.getScale(this.opt.size,this.el),this.position=a.getPosition(this.opt.position)}var e=a("./../core/helpers.js");b.exports=d;var f={src:"",size:"auto",position:"center"};d.prototype={width:0,height:0,x:0,y:0,draw:function(){this.loaded&&this.canvas.ctx.drawImage(this.x,this.y,this.width,this.height)},onLoad:function(){this.loaded=!0,this.scale=this.canvas.getScale(this.opt.size,this.el),this.position=this.canvas.getPosition(this.opt.position)},setSizeNPos:function(){this.width=this.scale.width,this.height=this.scale.height,this.x=this.position.x,this.y=this.position.y}}},{"./../core/helpers.js":5}],8:[function(a,b,c){"use strict";function d(a,b,c){this.pos=a,b&&(this.parent=b),c&&(this.child=c)}function e(a,b,c){var d=g(f(a));return c&&(d=h(c,d)),d}function f(a){a=a.replace("center","50%");var b=a.split(" ");return{width:b[0],height:1===b.length?b[0]:b[1]}}function g(a,b){return{x:-1===a.x.indexOf("%")?a.x:a.x.slice(0,-1)/100*b.width,y:-1===a.y.indexOf("%")?a.y:a.y.slice(0,-1)/100*b.height}}function h(a,b){return{x:b.x-a.width/2,y:b.y-a.height/2}}b.exports=d,d.getPt=e,d.prototype={update:function(){var a=e(this.pos,this.parent,this.child);this.x=Math.round(a.x),this.y=Math.round(a.y)},remove:function(){this.parent&&this.parent.detach(this)}}},{}],9:[function(a,b,c){"use strict";function d(a,b,c){this.size="size",this.original=j.extract(b,["width","height"]),c&&(this.parent=c,this.update())}function e(a,b,c){return"auto"===a?j.extract(b,["width","height"]):"cover"===a||"contain"===a?i(a,b,c):h(g(f(a),c))}function f(a){var b=a.split(" ");return{width:b[0],height:1===b.length?b[0]:b[1]}}function g(a,b){return{width:-1===a.width.indexOf("%")?a.width:a.width.slice(0,-1)/100*b.width,height:-1===a.height.indexOf("%")?a.height:a.width.slice(0,-1)/100*b.height}}function h(a,b){var c=a.height/a.width;return{width:"auto"===b.width?b.height/c:b.width,height:"auto"===b.height?b.width*c:b.height}}function i(a,b,c){var d=b.height/b.width,e=c.height/c.width,f="cover"===a?e>d:d>e;return f?{width:c.height/d,height:c.height}:{width:c.width,height:c.width*d}}var j=a("./../core/helpers.js");b.exports=d,d.getSize=e,d.prototype={update:function(){var a=e(this.size,this.original,this.parent);this.width=Math.round(a.width),this.height=Math.round(a.height)},remove:function(){this.parent&&this.parent.detach(this)}}},{"./../core/helpers.js":5}],10:[function(a,b,c){"use strict";function d(a){this.canvas=new e(a),this.frame=f.add(this.render.bind(this))}var e=a("./core/Canvas.js"),f=a("./core/frame.js"),g=a("./render/Anim.js"),h=a("./core/helpers.js");window.Zeotrope=d,d.prototype={anims:[],anim:function(a){var b=new g(a);return b._zeotrope=this,this.anims.push(b),b},detach:function(a){h.remove(this.anims,a)},render:function(){this.canvas.clear();for(var a=0;a<this.anims.length;a++)this.anims[a].render(this.canvas)},remove:function(){f.remove(this.frame),this.canvas.remove()}}},{"./core/Canvas.js":1,"./core/frame.js":4,"./core/helpers.js":5,"./render/Anim.js":6}]},{},[1,2,3,4,5,6,7,8,9,10]);